<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backend Project - Task Manager</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body>
    <div class="main w-full min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-900 to-zinc-800">
    <div class="form p-10 text-white">
    <div class="max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold mb-6 text-center bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">Add New Task</h2>
                
              
    <% if (typeof query !== 'undefined') { %>
    <% if (query.success) { %>
    <div class="mb-4 p-3 rounded-lg bg-green-800/30 border border-green-600 text-green-300">
    <%= query.success %>
    </div>
    <% } %>
    <% if (query.error) { %>
    <div class="mb-4 p-3 rounded-lg bg-red-800/30 border border-red-600 text-red-300">
    <%= query.error %>
    </div>
    <% } %>
    <% } %>
                
    <form action="/create-task" method="POST" class="space-y-4">
    <input class="block w-full rounded-lg px-5 py-3 outline-none bg-zinc-800 border border-zinc-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 placeholder-zinc-400" 
    type="text" 
    name="title"
    placeholder="Enter your task title" 
    required>
    <textarea class="block w-full rounded-lg mt-3 px-5 py-3 outline-none resize-none bg-zinc-800 border border-zinc-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 placeholder-zinc-400 h-24" 
    name="description"
    placeholder="Write your task description"></textarea>
    <input class="mt-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-6 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 cursor-pointer shadow-lg hover:shadow-blue-500/25" 
    type="submit" 
    value="Add Task">
    </form>
    </div>
    </div>
        
    <div class="tasks flex gap-6 flex-wrap p-10 text-white justify-center">
    <% if (tasks && tasks.length > 0) { %>
    <% tasks.forEach(function(task) { %>
    <div class="task w-80 px-6 rounded-xl py-6 bg-gradient-to-br from-zinc-800 to-zinc-900 border border-zinc-700 hover:border-zinc-600 transition-all duration-300 hover:transform hover:scale-105 hover:shadow-xl hover:shadow-zinc-900/50">
    <h1 class="text-white text-2xl font-bold tracking-tight mb-3"><%= task.title %></h1>
    <p class="text-zinc-300 text-sm mb-4 leading-relaxed">
    <%= task.description.length > 100 ? task.description.substring(0, 100) + '...' : task.description %>
    </p>
    <div class="flex gap-2 items-center">
    <a href="/task/<%= task.id %>" class="text-blue-400 hover:text-blue-300 inline-block font-medium transition-colors duration-200 hover:underline">Read More</a>
    <a href="/edit-task/<%= task.id %>" class="text-yellow-400 hover:text-yellow-300 inline-block font-medium transition-colors duration-200 hover:underline ml-3">Edit</a>
    <form action="/delete-task/<%= task.id %>" method="POST" class="inline ml-3" onsubmit="return confirm('Are you sure you want to delete this task?')">
    <button type="submit" class="text-red-400 hover:text-red-300 font-medium transition-colors duration-200 hover:underline">Delete</button>
    </form>
    </div>
    </div>
    <% }); %>
    <% } else { %>
    <div class="text-center w-full">
    <h3 class="text-zinc-500 text-lg font-medium">No tasks yet</h3>
    <p class="text-zinc-600 mt-2">Create your first task using the form above!</p>
    </div>
    <% } %>
    </div>
    </div>
</body>
</html>